'use strict';

var cal = require('../'),
    assert = require('assert'),
    events = require('events');

describe('cal.logger', function () {
    after(function (next) {
        this.timeout(10000);
        cal.stop(function () {
            setTimeout(next, 3000);
        });
    });

    it('createLogger, inherit, should inherit publisher from root looger', function () {
        var pub = new events.EventEmitter();
        cal.logger.publishTo(pub, 'event-args');
        assert.ok(pub === cal.logger._publisher);
        assert.equal('event-args', cal.logger._publishTopic);

        var logger = cal.createLogger({inherit: true});
        assert.ok(pub === logger._publisher);
        assert.ok(pub === logger._publisher);

        logger = cal.createLogger({inherit: false});
        assert.ok(pub !== logger._publisher);
    });
});
