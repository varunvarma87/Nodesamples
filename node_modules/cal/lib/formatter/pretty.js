'use strict';

var util = require('util'),
    colors = require('colors'),
    EOL = require('os').EOL,
    constants = require('../constants');

colors.setTheme({
    c0: 'green',
    c1: 'red',
    c2: 'red',
    c3: 'red',
    c4: 'yellow'
});

var levels = {
    debug: 0,
    info: 0,
    warn: 1,
    error: 2
};

module.exports = {

    format: function pretty(args) {
        var level = levels.debug,
            prettylog = '';

        var status = 'c' + (args.status || 0);
        if (args.status >= level) {
            prettylog = '(' + args.messageClass + ') ' +
                util.format(colors[status](args.type),
                colors.grey(args.name),
                (args.duration ? ' ' + colors.white(args.duration + 'ms') : '')) + EOL;
        }

        if (args.messageClass === constants.MessageClass.TRANSACTION_START) {
            prettylog = EOL + prettylog;
        }

        return prettylog;
    }

};
