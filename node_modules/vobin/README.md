#Overview

An **experimental** serializer / deserializer for VO binary format.

### Usage

```javascript
var VOBin = require("vobin"),
    Serializer = VOBin.Serializer,
    Deserializer = VOBin.Deserializer;

var binaryData = Serializer.serialize(someJsonData);

var deserializedJson = Deserializer.deserialize(binaryData);
```

### Serialization Options

The Serializer takes an optional map of options:

```javascript
{
	version : number, //Version, default is 1.
	useBase64 : boolean, //Default false
	useCompression : boolean, //Default false
	forceHeader : boolean, //Default false
	resetNeeded : boolean, //Default false
	bufferSize : number //Size of internal serialization buffer, default 10k
}
```

### JSON Representations

This serializer/deserializer works with JSON data that contains type information and is typically of the form:

```javascript
{
	name : "string"
	fields : "object"
}
```

For VO objects, and:


```javascript
{
	type : "string",
	value : "any"
}
```

For VO fields.

Ideally, these would be used as underlying validation objects to a wrapper object that erases type information from the end user.

Example GetFisByAccountRequest VO for FinancialInstrument::GetFisByAccountRequest:

```javascript
{
	name   : "FinancialInstrument::GetFisByAccountRequest",
	fields : {
		client_actor : {
			type  : "Common::ActorInfoVO",
			value : {
				name   : "Common::ActorInfoVO",
				fields : {
					actor_type : {
						type  : "sint8",
						value : 1
					},
					actor_session_id : {
						type  : "string",
						value : "2011-11-11 00:00:00"
					},
					actor_ip_addr : {
						type  : "string",
						value : "10.249.52.108"
					}
				}
			}
		},
		account_number : {
			type  : "uint64",
			value : "1731511286119924231"
		},
		all_instruments : {
			type : "bool",
			value: 0
		}
	}
}
```

or, for example User::LoadUserDataRequest:

```javascript
{
	name : "User::LoadUserDataRequest",
	fields : {
		account_load : {
			type : "User::AccountLoadVO",
			value : {
				name : "User::AccountLoadVO",
				fields : {
					account_number : {
						type : "uint64",
						value : ["1731511286119924231"]
					}
				}
			}
		}
	}
}
```

### VO Object Helpers

A VO object helper exists that assists with building well formed VO objects, as well as performing field validation.

```javascript
var VO = require("vobin").VO;

var loadUserDataRequest = VO.build({
	name : "User::LoadUserDataRequest",
	fields : {
		account_load : {
			type : "User::AccountLoadVO",
			value : {
				name : "User::AccountLoadVO",
				fields : {
					account_number : {
						type : "uint64",
						value : ["1731511286119924231"]
					}
				}
			}
		}
	}
});
```

The *build()* method will automatically validate.

You can also build VOs progressively:

```javascript
var accountLoad = new VO("User::AccountLoadVO");
accountLoad.addField("account_number", new Field("uint64", ["1731511286119924231"]));
```

And so forth.

### Stripping Type

Once json is wrapped in a *VO* object, the type can be stripped for a simplified JSON form:

```javascript
var VO = require("vobin").VO;

var loadUserDataRequest = VO.build({
	name : "User::LoadUserDataRequest",
	fields : {
		account_load : {
			type : "User::AccountLoadVO",
			value : {
				name : "User::AccountLoadVO",
				fields : {
					account_number : {
						type : "uint64",
						value : ["1731511286119924231"]
					}
				}
			}
		}
	}
});

loadUserDataRequest.json();
```

Will result in:

```javascript
{
	account_load : {
		account_number : ["1731511286119924231"]
	}
}
```