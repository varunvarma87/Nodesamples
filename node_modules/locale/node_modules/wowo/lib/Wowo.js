'use strict';

var Wowo = function (wowoCdb) {
    var self = this;

    this.wowoMap = {};
    Object.keys(wowoCdb).forEach(function (key) {
        self.wowoMap[key] = Array.isArray(wowoCdb[key]) ? wowoCdb[key].join() : wowoCdb[key];
    });
};

Wowo.prototype.get = function (key) {
    return this.wowoMap[key] || this.wowoMap['wowo_' + key];
};

Wowo.prototype.isWowoOn = function (key) {
    var val = this.get(key);

    if (!val) {
        throw new Error('Wowo key[' + key + '] is not found');
    }

    return ['1', 'true', 'on'].indexOf(val) >= 0;
};

Wowo.prototype.isWowoOff = function (key) {
    return !this.isWowoOn(key);
};

module.exports = Wowo;
