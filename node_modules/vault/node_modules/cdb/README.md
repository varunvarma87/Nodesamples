node-cdb
========

A [cdb](http://cr.yp.to/cdb.html) file reader for Node.js. Loosely based on [node-cdblid](https://github.com/jukebox42/node-cdblib)
by @jukebox42.



To read a value or values for a given key, use 'find' or 'findAll'. Each of these methods reads and caches the values
for the provided key.

```javascript
var reader = require('cdb').createReader('./mycdb.cdb');

// 'find' will lookup and cache the first found value for the given key.
reader.find('my_key', function (err, value) {
    console.log('my_key = ', value);
});


// 'findAll' will lookup and cache an Array of all values read for the given key.
reader.findAll('my_keys', function (err, values) {
    console.log('my_keys = ', values.join(', '));
});

```


If you want a dump of all values contained in a particular CDB, use 'dump'. The use of the dump API is an implicit 'load'
if nothing has been read/loaded previously. Note that for large CDBs this could exhaust Node.js available memory space,
so use with caution.

```javascript
var reader = require('cdb').createReader('./mycdb.cdb');
reader.dump(function (err, records) {
    console.dir(records);
});
```


To load the CDB data into memory for faster lookups, use 'read' prior to fetching values. Note that for large CDBs this
could exhaust Node.js available memory space, so use with caution.

```javascript
var reader = require('cdb').createReader('./mycdb.cdb');

function getKey() {
    // reader is now primed and reads are from memory
    reader.find('my_key', function (value) {
        console.log('my_key = ', value);
    });
}

reader.read(getKey);
```

## ReadStream (Experimental)

There is also an experimental read stream API that can be used in memory-bound scenarios.
```javascript
var cdb = require('cdb');

var reader = cdb.createReadStream('./mycdb.cdb');
reader.on('data', function (prop) {
    console.log(prop.key, ' = ', prop.value);
})

reader.on('error', function (err) {
    console.error(err);
});

reader.on('end', function () {
    console.log('read end');
});

reader.on('close', function () {
    console.log('reader closed');
});
```
