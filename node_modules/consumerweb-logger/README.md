consumerweb-logger
==================
[![Build Status](https://ci.paypalcorp.com/consumerweb-modules/buildStatus/icon?job=consumerweb-logger)](https://ci.paypalcorp.com/consumerweb-modules/job/consumerweb-logger/)

Logger for consumer web applications

**Lead Maintainer**: [DT-Sriracha](https://github.paypal.com/orgs/ConsumerWeb-Modules/teams/dt-sriracha)

## Installation

```$ npm install consumerweb-logger --save```

## Versions

- `1.x` - Main version used by most apps, includes the newest `pplogger`.
- `2.x` - Current `master` had a breaking change to the `logCalEvent` method and should be adopted carefully.

## API

#### logger.middleware

You can use the logger middleware to ensure that any `next(err)` or thrown error in your Kraken apps
gets logged to CAL and/or the console.

To use it this way just add the following to your `config/config.json`:

```
"serverError": {
	"enabled": true,
	"priority": 150,
	"module": {
		"name": "consumerweb-logger",
		"method": "middleware",
		"arguments": [
			"errors/500"
		]
	}
}
```

#### logger.debug

```javascript
/**
 * Will log a CAL event as DEBUG log level
 *
 * req - Express request object
 * data - Any JSON serializable data
 */
logger.debug(req, data);
```

#### logger.info

```javascript
/**
 * Will log a CAL event as INFO log level
 *
 * req - Express request object
 * data - Any JSON serializable data
 */
logger.info(req, data);
```

#### logger.warn

```javascript
/**
 * Will log a CAL event as WARN log level
 *
 * req - Express request object
 * data - Any JSON serializable data
 */
logger.warn(req, data);
```

#### logger.error

```javascript
/**
 * Will log a CAL event as ERROR log level
 *
 * req - Express request object
 * data - Any JSON serializable data
 */
logger.error(req, data);
```

#### logger.logCalEvent

```javascript
/**
 * Will log a custom CAL event (not debug, info, warn, or error).  Used mostly for BIZ events.
 *
 * name - Name of CAL event
 * type - CAL event type (BIZ, etc.)
 * data - Any JSON serializable data
 * status - CAL status
 * correlationId - CAL correlation ID used for this transaction
 */
logger.logCalEvent(name, type, data, status, correlationId);
```

#### logger.log

```javascript
/**
 * Will log a CAL event depending on the error code in lib/logMappings.json
 *
 * req - Express request object
 * data - Any JSON serializable data
 */
logger.log(err, req, statusCode);
```
