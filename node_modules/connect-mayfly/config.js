'use strict';

var deployEnv = require('environment-paypal');

var defaultCookie = {
        'path': '/',
        'httpOnly': true,
        'maxAge': null
    };

function defaultConfig(settings) {
    settings = settings || {};
    settings.name = 'nsid';                 //NodeJS sessionId cookie name
    settings.lifetime = settings.lifetime || 3600;
    settings.resave = settings.resave || false;
    settings.saveUninitialized = settings.saveUninitialized || true;
    settings.secret = 'PayPal_Node_Infra';  //overriding secret
    settings.cookie = settings.cookie || defaultCookie;
    if (deployEnv.isLive() || deployEnv.isSandbox()) {
        if (typeof settings.cookie.secure !== 'boolean') {
            // In Sandbox/Prod, make cookie secure, unless explictly set as false
            settings.cookie.secure = true;
        }
    }
    settings.sharedSession = settings.sharedSession || false;   //shared session default by default
    return settings;
}

module.exports = defaultConfig;