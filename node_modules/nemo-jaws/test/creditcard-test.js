/*global describe:true, it:true, before:true, after:true */
"use strict";

var assert = require('assert'),
	nemoFactory = require('nemo-mocha-factory'),
	dd = require("data-driven");

describe('@nemo-jaws.creditcard@', function () {
	nemoFactory({
		"plugins": {
			"plugins": {
				"query": {
					"module": process.cwd() + "/plugin/creditcard",
					"register": true
				}
			}
		}
	});
	dd([{"type": "Visa"}, {"type": "Master"}], function() {
		it('should @create{type}CreditCard@', function (ctx, done) {
			var creditCardData = {
				"country":"US",
				"cardType": ctx.type,
				"currency": "USD"
			}
			nemo.creditcard.post(creditCardData, function (err, data) {
				if (!!err) {
					done(err);
				}
				if (data && data.cardType && data.cardType === ctx.type) {
					//console.log(data);
					done();
				}
			});
		});
		it('should do something else', function(ctx, done) {
			done();
		})
	})

});

//TODO: write one or more tests to make sure plugins and setup config are being taken correctly
