'use strict';

function resolveDomain(req) {
    var host, domain;

    if (process.env.DEPLOY_ENV) {
        return '.paypal.com';
    }

    host = req.get('host');
    domain = host.substr(0, host.indexOf(':') || host.length);

    return domain !== 'localhost' && domain !== '127.0.0.1' ? '.paypal.com' : domain;
}

function isSecure(req) {
    return process.env.DEPLOY_ENV ? true : (req.protocol === 'https' ? true  : false);
}

module.exports = {
    isSecure: isSecure,
    resolveDomain: resolveDomain
};