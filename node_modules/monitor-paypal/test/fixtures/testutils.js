'use strict';

var httpunch = require('httpunch');

// Send a request to our private server
module.exports.inject = function inject(urlPath, callback, params) {
    var reqParams = {
        scheme: 'http',
        method: 'GET',
        port: 8011,
        path: urlPath,
        agent: false,
        headers: {'Cookie': 'eager beaver'}
    };
    params = params || {};

    for (var i in params) {
        if (params.hasOwnProperty(i)) {
            reqParams[i] = params[i];
        }
    }

    httpunch.request(reqParams, function (error, res) {
        if (error) {
            return callback(error);
        }
        return callback(null, res && res.body && res.body.toString('utf8'), res.statusCode);
    });
};
