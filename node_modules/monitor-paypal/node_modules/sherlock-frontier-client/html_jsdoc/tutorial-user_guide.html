<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>sherlock-frontier-client tutorialuser_guide</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.spacelab.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top ">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">sherlock-frontier-client</a>
	</div>
	<div class="navbar-collapse">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="module-demo_frontier-demo1.html">demo/frontier-demo1</a></li><li><a href="module-demo_frontier-demo1-GA.html">demo/frontier-demo1-GA</a></li><li><a href="module-demo_frontier-demo2.html">demo/frontier-demo2</a></li><li><a href="module-demo_frontier-demo3.html">demo/frontier-demo3</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="FrontierClientGA.html">FrontierClientGA</a></li><li><a href="SignedInt32.html">SignedInt32</a></li><li><a href="SignedInt32RingBuffer.html">SignedInt32RingBuffer</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="tutorials.list.html" class="dropdown-toggle" data-toggle="dropdown">Tutorials<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="tutorial-concept_guide.html">concept_guide</a></li><li><a href="tutorial-user_guide.html">user_guide</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="global.html#ErrorCodes">ErrorCodes</a></li><li><a href="global.html#normalizeConfig">normalizeConfig</a></li><li><a href="global.html#protocolBuilderV1">protocolBuilderV1</a></li>
				</ul>
			</li>
			
		</ul>
	</div>
</div>
</div>


<div class="container">
<div class="row">

	
	<div class="col-md-12">
	
		<div id="main">
    		<h1 class="page-title">tutorialuser_guide</h1>
			<section class="tutorial-section">

<header>
    

    <h2>user_guide</h2>
</header>

<article>
    <h1>API User Guide</h1><p>To create an instance of Frontier client use the following constructor.</p>
<pre class="prettyprint source"><code>var client = new FrontierClient (&quot;localhost:6001&quot;, clientGroup, options)</code></pre><p>For a list of supported options and their default values see <code>FrontierClient.DefaultOptions</code></p>
<p>This object emits 2 events of interest to the user:</p>
<ul>
<li><code>FrontierClient.ERROR</code></li>
</ul>
<pre class="prettyprint source"><code>client.on (FrontierClient.ERROR, function (error) {
    console.error (&quot;FrontierClient error: %j&quot;, error);
});</code></pre><p><strong>Note</strong> that this event is provided for information purposes only. There is no need to react to this event by closing the client connection and reopening it as the FrontierClient
does this automatically for as long as <code>FrontierClient#options</code><code>.connect_retry</code> is set to <code>true</code> which is the default. </p>
<p>and</p>
<ul>
<li><code>FrontierClient.CONNECT</code></li>
</ul>
<pre class="prettyprint source"><code>client.on (FrontierClient.CONNECT, function (error, connectedTo) {
    if (error) {
        console.error (&quot;Frontier client connection error: %j&quot;, error)
    } else {
        console.error (&quot;Frontier client is connected to: %s&quot;, connectedTo)
    }
}</code></pre><p>The client exposes 3 methods to interact with Frontier server:</p>
<ul>
<li><code>register</code></li>
</ul>
<p>Construct a set of metric descriptors and registered them on the server. The server responds with an array of binary metric IDs that need to be held on and submitted back with every
future sample of this metric. </p>
<pre class="prettyprint source"><code>var metric_set = {
     resolution: 'R_10s',
     domain: 'pp_here_app',
     dimension:[
         {name: 'pool', value:'p123'}, {name:'host', value:'host456'}
     ],
     metric:[
         {name: 'business.metric1', metric_kind:'GAUGE', value_kind:&quot;FLOAT&quot;, units:&quot;payments/sec&quot;},
         {name: 'business.metric2', metric_kind:'COUNTER', value_kind:&quot;INT&quot;, units:&quot;payments&quot;}
     ]
 };

client.register (metric_set, function (error, response) {
    if (!error) {
        console.log (&quot;Received array of metric IDs: %j&quot;, response.metric_id);
    }
});</code></pre><p>Hold on to <code>response.metric_id</code> which contains an array of binary metric IDs corresponding to the order of metrics in metric_set. </p>
<p>For a complete reference on <code>metric_set</code>structure see 
<a href="../resources/Protocol.proto#L37">Frontier protobuf definition</a></p>
<ul>
<li><code>post</code></li>
</ul>
<p>Use this method to post samples on the previously registered metrics. Note that the size of the array of metric ids and the size of the array of samples must match.
Sample at position i corresponds to metric id at position i in the metric id array.</p>
<pre class="prettyprint source"><code>client.post (
    Date.now()/1000, //timestamp, in seconds
    response.metric_id, // array of binary metric IDs returned by 'register' call
    [{float_value: 10 + this_post}, {int32_value: 20 + this_post}], //samples
    postReliability, // post reliability level
    function (err, result, latency) { // callback
        if (err) {
            console.trace(err);
        } else {
            console.log (&quot;received ack for post # %d (latency=%d msec)&quot;, this_post, latency);
        }
    }
);</code></pre><p>The result from post contains the number of samples accepted by the server (result.posted).</p>
<p>An important parameter of the post is the post reliability level. For a list of reliability levels and their meaning see
<code>FrontierClient.PostReliability</code></p>
<ul>
<li><code>postUnregistered</code></li>
</ul>
<p>This is a shortcut which combines <code>register</code> and <code>post</code> into a single method. It's convenient to use it when an application life span is short and the metrics being published 
are unknown ahead of time.  However, for majority of the applications that are publishing metrics to Sherlock the metrics are well known in advance, and in that case it's highly recommended
to use <code>register</code>/<code>post</code> instead of <code>postUnregistered</code>. The main advantage of this technique is efficiency as much fewer number of bytes is being sent out by the client.</p>
<pre class="prettyprint source"><code>client.postUnregistered (
    Date.now(),
    {
        resolution: 'R_1m',
        domain: 'pp_here_app',
        dimension:[
            {name: 'pool', value:'p123'}, {name:'host', value:'host456'}
        ],
        metric:[
            {name: 'business.metric3', metric_kind:'GAUGE', value_kind:&quot;DOUBLE&quot;, units:&quot;requests/sec&quot;},
            {name: 'business.metric4', metric_kind:'COUNTER', value_kind:&quot;INT&quot;, units:&quot;transactions&quot;}
        ]
    },
    [ {float_value: 100}, {int32_value: 200}],
    postReliability,
    function (error, result, latency) {
    }
);</code></pre>
</article>

</section>

		</div>
	</div>

	<div class="clearfix"></div>

	

</div>
</div>


<footer>

	Sherlock
	<br />


	<span class="copyright">
	eBay Inc
	</span>
	<br />

<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0</a>
	on 2015-05-14T18:53:11-07:00 using the <a
	href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
</span>
</footer>

<!--<script src="scripts/sunlight.js"></script>-->
<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/bootstrap-dropdown.js"></script>
<script src="scripts/toc.js"></script>

<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "h1,h2,h3,h4",
		showAndHide : false,
		scrollTo    : "100px"
	} );

	$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();
	//			$( ".tutorial-section pre, .readme-section pre" ).addClass( "sunlight-highlight-javascript" ).addClass( "linenums" );

	$( ".tutorial-section pre, .readme-section pre" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			lang = "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : true,
		showMenu : true,
		enableDoclinks : true
	} );
} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->


</body>
</html>