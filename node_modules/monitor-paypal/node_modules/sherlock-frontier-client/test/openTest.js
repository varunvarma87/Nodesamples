'use strict';

var os = require('os'),
    assert = require('assert'),
    FrontierClient = require('../lib/FrontierGA'),
    clientEndPoint = "127.0.0.1:7100",
    clientGroup = "tenant=pp;env=qa;app_svc=nodejs",
    queueCapacity = "100",
    frontierMockServer = require('./fixtures/mockFrontierServer');


describe('frontier mock server', function () {

    before(function (next) {
        frontierMockServer.listen(7100, function () {
            next();
        });
    });

    //
    // after(function (next) {
    //     console.log("OPEN CLOSE");
    //     frontierMockServer.close();
    //     next();
    // });

    describe('Happy path:', function (next) {

        it('open test', function (next) {

            var client = new FrontierClient(clientEndPoint, clientGroup, {
                connect_retry_interval_sec: 5,
                queue_capacity: queueCapacity
            });
            assert.equal('tenant=pp;env=qa;app_svc=nodejs', client.clientGroup);
            next();
        });

    });
});
