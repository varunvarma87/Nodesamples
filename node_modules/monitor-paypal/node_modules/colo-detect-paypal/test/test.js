'use strict';
var fs = require('fs'),
    assert = require('assert');

var colo = require('../index').coloDetect;
var coloMx = require('../index').coloMxDetect;
var res;

describe('index', function () {
    process.env.NODE_ENV='TEST';

	it('simple paypal phx test', function (next) {
		res = colo('test.phx.paypal.com');
		assert.equal('phx', res);
		next();
	});
	it('simple paypal slcA test', function (next) {
		res = colo('test.slc.paypal.com', '/x/web/LIVE5');
		assert.equal('slca',  res);
		next();
	});
	it('more real paypal slcA test', function (next) {
		res = colo('test.slc.paypal.com', '/x/web/LIVE5-NONVERSIONED-640-20100706-1');
		assert.equal('slca',  res);
		next();
	});
	it('simple paypal slcB test', function (next) {
		res = colo('test.slc.paypal.com', '/x/web/LIVE6');
		assert.equal('slcb',  res);
		next();
	});
	it('more real paypal slcB test', function (next) {
		res = colo('test.slc.paypal.com', '/x/web/LIVE6-NONVERSIONED-640-20100706-1');
		assert.equal('slcb',  res);
		next();
	});
	it('simple paypal slc? test', function (next) {
		res = colo('test.slc.paypal.com', '/x/web/LIVE?');
		assert.equal('slc',  res);
		next();
	});
	it('simple paypal dcg11 test', function (next) {
		res = colo('dcg11test.dcg11.slc.paypalinc.com', '/x/web/LIVE?');
		assert.equal('dcg11',  res);
		next();
	});
	it('simple paypal dcg12 test', function (next) {
		res = colo('dcg12test.dcg12.slc.paypalinc.com', '/x/web/LIVE?');
		assert.equal('dcg12',  res);
		next();
	});
	it('simple paypal dcg10 test', function (next) {
		res = colo('test.dcg10.slc.paypalinc.com', '/x/web/LIVE?');
		assert.equal('dcg10',  res);
		next();
	});
	it('error test', function (next) {
    process.env.NODE_ENV = 'production';
		res = colo('slc.paypal.com');
    assert.ok(res === '');
		next();
	});


  it('simple paypal phx MX test', function (next) {
    res = coloMx('test.phx.paypal.com');
    assert.equal('mx.phx.paypal.com', res);
    next();
  });
  it('simple paypal slc MX test', function (next) {
    res = coloMx('test.slc.paypal.com');
    assert.equal('mx.slc.paypal.com', res);
    next();
  });
  it('simple paypal dcg11 test', function (next) {
    res = coloMx('test.dcg11.slc.paypalinc.com');
    assert.equal('mx.slc.paypal.com', res);
    next();
  });
  it('simple paypal dcg10 test', function (next) {
    res = coloMx('test.dcg10.phx.paypalinc.com');
    assert.equal('mx.phx.paypal.com', res);
    next();
  });
  it('simple staging MX test', function (next) {
    process.env.NODE_ENV='staging';
    res = coloMx('stage2dev700.qa.paypal.com');
    assert.equal('atom.paypalcorp.com', res);
    next();
  });
  it('simple development MX test', function (next) {
    process.env.NODE_ENV='development';
    res = coloMx('stage2dev700.qa.paypal.com');
    assert.equal('atom.paypalcorp.com', res);
    next();
  });
  it('simple no env MX test', function (next) {
    res = coloMx('stage2dev700.qa.paypal.com');
    assert.equal('atom.paypalcorp.com', res);
    next();
  });

});
