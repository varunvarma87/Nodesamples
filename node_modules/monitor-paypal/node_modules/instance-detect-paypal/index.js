'use strict';

/**
 * instance-detect-inc - Determines the clustered instance number
 *    the application is running under. Normally, this will be a
 *    small integer in the range 1-n where n is the number of cores.
 *    If the application is not clustered, the value will always be 1.
 *    Currently, it assumes pm2 is the clustering mechanism. When that
 *    changes, new logic here will insulate you from how to determine
 *    the instanceId.
 *
 * @return integer value
 *
 */

module.exports.getInstanceId = function getInstanceId() {

  if (!process.env.pm_id) {
    return 1;
  }
  var instanceId = parseInt(process.env.pm_id, 10) + 1;
  return instanceId;
};
