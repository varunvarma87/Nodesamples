(function(dust){"use strict";var filters,hex={},c;if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}for(c=0;c<256;c+=1){if(!(c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||c===95)){hex[c]=c.toString(16).toUpperCase()}}hex[8232]=2028;hex[8233]=2029;function encodeString(s,format,skipChars){var hexValue,i,out="",type=typeof s,strlen;if(s===null||s===undefined){return null}if(type==="number"||type==="boolean"){return s.toString()}if(type==="string"){for(i=0,strlen=s.length;i<strlen;i+=1){hexValue=hex[parseInt(s.charCodeAt(i),10)];if(hexValue&&skipChars.indexOf(s[i])===-1){out+=format.replace("HH",hexValue)}else{out+=s[i]}}return out}return s}function decodeString(s,re){if(s===null||s===undefined){return null}var type=typeof s;if(type==="number"||type==="boolean"){return s.toString()}if(type==="string"){return s.replace(/(&#x|%|\\|\\x)(2028|2029)(;|\s){0,1}/gi,function(match,p1,p2){return String.fromCharCode(parseInt(p2,16))}).replace(re,function(matchedStr){var ex_matched=matchedStr.match(/[A-F0-9]{2}/i);return String.fromCharCode(parseInt(ex_matched,16))})}return s}function isValidBaseUrl(s){return s.match(/^(https?:\/\/)?[a-z0-9+:_\/.@#\-]+[?]?$/i)}var escapeHTML,unescapeHTML;(function(undefined){var re=/[\u0000-\u0008\u000b\u000c\u000e-\u001f\u00a0<>'"`\\\[\]+\-=.:(){};,\/&\u007f\u2028\u2029]/g,index={"	":"	","\r":"\r","\n":"\n"," ":"&nbsp;","<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","":"&#xfffd;","\u2028":"&#x2028;","\u2029":"&#x2029;"},i,c;for(i=0;i<32;i+=1){c=String.fromCharCode(i);if(!index[c]){index[c]="&#xfffd;"}}for(i=32;i<128;i+=1){c=String.fromCharCode(i);if(!index[c]&&c.match(re)){index[c]="&#x"+i.toString(16).toUpperCase()+";"}}escapeHTML=function(s){if(s===null||s===undefined){return null}var type=typeof s;if(type==="number"||type==="boolean"){return s.toString()}return s.toString().replace(re,function(c){return index[c]})};unescapeHTML=function(s){if(s===null||s===undefined){return null}var type=typeof s;if(type==="number"||type==="boolean"){return s.toString()}return s.toString().replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#xfffd;/g,"").replace(/&#x2028;/,"\u2028").replace(/&#x2029;/,"\u2029").replace(/&#x27;/g,"'").replace(/&#x28;/g,"(").replace(/&#x29;/g,")").replace(/&#x2B;/g,"+").replace(/&#x2C;/g,",").replace(/&#x2D;/g,"-").replace(/&#x2E;/g,".").replace(/&#x2F;/g,"/").replace(/&#x3A;/g,":").replace(/&#x3B;/g,";").replace(/&#x3D;/g,"=").replace(/&#x5B;/g,"[").replace(/&#x5C;/g,"\\").replace(/&#x5D;/g,"]").replace(/&#x60;/g,"`").replace(/&#x7B;/g,"{").replace(/&#x7D;/g,"}").replace(/&amp;/g,"&")}})();function escapeHTMLAttribute(s){return encodeString(s,"&#xHH;","")}function unescapeHTMLAttribute(s){return decodeString(s,/&#x[A-F0-9]{2};/gi)}var escapeJS,customJsonStringify=JSON&&JSON.stringify?JSON.stringify:function(){throw new Error("JSON.stringify not found")};(function(undefined){var jsonRE=/[\/<>&%\u0000\u2028\u2029*()'=!?`#]/g,jsRE=/[^a-z0-9_\u0080-\u2027\u202a-\uffff]/gi,index={"	":"\\t","\n":"\\n","\r":"\\r","\u2028":"\\u2028","\u2029":"\\u2029"},nativeStringify,i,c;for(i=0;i<128;i+=1){c=String.fromCharCode(i);if(!index[c]&&c.match(jsRE)){index[c]="\\u"+("000"+c.charCodeAt(0).toString(16)).slice(-4)}}escapeJS=function(s){if(s===null||s===undefined){return null}var type=typeof s;if(type==="number"||type==="boolean"){return s.toString()}return s.toString().replace(jsRE,function(c){return index[c]})};if(JSON&&JSON.stringify&&JSON.stringify("\\\"/<>&%\x00\u2028\u2029*()'=!?`#")==='"\\\\\\"/<>&%\\u0000\u2028\u2029*()\'=!?`#"'){nativeStringify=JSON.stringify;customJsonStringify=function(){return nativeStringify.apply(this,arguments).replace(jsonRE,function(c){return index[c]})}}})();function escapeCSS(s){return encodeString(s,"\\HH ","")}function unescapeCSS(s){return decodeString(s,/\\[A-F0-9]{2} /gi)}function escapeURIComponent(s){return encodeString(s,"%HH","%+")}function unescapeURIComponent(s){return decodeString(s,/%[A-F0-9]{2}/gi)}function escapeURL(s){var out="",pos,pos_equal,pos_amps,pos_hash,temp_str,type=typeof s;if(s===null||s===undefined){return null}if(type==="number"||type==="boolean"){return s.toString()}if(type==="string"){pos=s.indexOf("?");if(pos===-1){return isValidBaseUrl(s)?s:escapeHTMLAttribute(s)}temp_str=s.substring(0,pos+1);out+=isValidBaseUrl(temp_str)?temp_str:escapeHTMLAttribute(temp_str);pos_equal=s.indexOf("=",pos);pos_amps=s.indexOf("&",pos_equal);pos+=1;while(pos_equal<pos_amps&&(pos_equal!==-1||pos_amps!==-1)){temp_str=s.substring(pos,pos_equal+1);out+=escapeHTMLAttribute(temp_str);temp_str=s.substring(pos_equal+1,pos_amps);out+=escapeURIComponent(temp_str);pos=pos_amps;pos_equal=s.indexOf("=",pos);pos_amps=s.indexOf("&",pos_equal)}if(pos_equal!==-1){temp_str=s.substring(pos,pos_equal+1);out+=escapeHTMLAttribute(temp_str);temp_str=s.substring(pos_equal+1);pos_hash=temp_str.indexOf("#");if(pos_hash===-1){out+=escapeURIComponent(temp_str)}else{out+=escapeURIComponent(temp_str.substring(0,pos_hash));out+=escapeHTMLAttribute(temp_str.substring(pos_hash))}}return out}return s}filters={h:function(value){return escapeHTML(value)},ha:function(value){return escapeHTMLAttribute(value)},j:function(value){return escapeJS(value)},uc:function(value){return escapeURIComponent(value)},js:function(value){return customJsonStringify(value)},ul:function(value){return escapeURL(value)},x:function(value){return escapeCSS(value)}};if(dust.filters){var filterName;for(filterName in filters){if(filters.hasOwnProperty(filterName)){dust.filters[filterName]=filters[filterName]}}}else{dust.filters=filters}dust.unescapeHTML=unescapeHTML;dust.unescapeHTMLAttribute=unescapeHTMLAttribute;dust.unescapeCSS=unescapeCSS;dust.unescapeURIComponent=unescapeURIComponent})(typeof exports==="object"?require("dustjs-linkedin"):dust);