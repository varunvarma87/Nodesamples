### Overview

Minimal wrapper around Node's http.request, providing an easy-to-use API and http utilities.

### Usage

HTTP method helper functions are exposed to facilitate easily making http calls. Any valid HTTP method can be invoked in the way below:

- `httpunch.get(options, callback)`
- `httpunch.get(url, callback)`
- `httpunch.post(options, callback)`
- `httpunch.post(url, body, callback)`

...and so forth.

A more generic request api is also provided:

* `httpunch.request(options, callback)` - Requires `options` to include request method.

In all of the above cases, `callback` is optional. It is also possible to defer request beginning until `end` is called.

These requests will return a `ClientRequest` object with the following additional properties:

- `end(callback)` - same as standard `end` but allows passing a callback here instead of in initial request.
- `pipe(stream)` - pipe the request to a writeable stream.

### Request Options

A configuration object containing the below values:

`protocol` Either `http:` or `https:`.

`hostname` A domain name or IP address of the server to issue the request to. Defaults to 'localhost'.

`port` Port of remote server. Defaults to 80.

`url` In lieu of host, port and path.

`method` A string specifying the HTTP request method. Defaults to 'GET'.

`path` Request path. Defaults to '/'. Should include query string if any. E.G. '/index.html?page=12', or use `qs` property.

`headers` An object containing request headers.

`body` A string or buffer payload for POST and PUT requests.

`qs` Query string. Optionally provide this separate from `path`.

`pathparams` Provide replacements to a parameterized path variables (like '/{x}/{y}').

`agent` Agent to use instead of the default agent. Not recommended.

`maxRedirects` Defaults to `0` (don't follow).

`socketTimeout` Set a socket timeout.

`connectTimeout` Set a timeout on the connection establishing.

`checkServerIdentity` Override hostname validation in Node 0.12.x.

See also: [http://nodejs.org/api/http.html](http://nodejs.org/api/http.html) and [http://nodejs.org/api/https.html](http://nodejs.org/api/https.html).

Rather than using an object, options can be replaced with a string representing a URL to request.

### Agent Creation

An agent can be created on demand using the following api:

```javascript
var agents = require('httpunch').agents;

var agent = agents.create(options);
```

The following options can be specified:

`protocol` Specifies the type of agent, either `'http:'` or `'https:'`, to create.

`maxSockets` Agent maxSockets.

`keepAlive` Specifies to use keep-alive (not available until Node.js 0.12).

### Keep-Alive specific options:

`keepAliveMsecs` Keepalive time, default is 100.

### SSL Specific Options

`ciphers` A string describing the ciphers to use or exclude. Consult [OpenSSL Documentation](http://www.openssl.org/docs/apps/ciphers.html#CIPHER_LIST_FORMAT) for details on the format.

`key` Private key to use for SSL. Default null.

`cert` Public x509 certificate to use. Default null.

`passphrase` A string of passphrase for the private key or pfx. Default null.

`ca` An authority certificate or array of authority certificates to check the remote host against.

`pfx` Certificate, Private key and CA certificates to use for SSL. Default null.

`rejectUnauthorized` If true, the server certificate is verified against the list of supplied CAs. An 'error' event is emitted if verification fails. Verification happens at the connection level, before the HTTP request is sent. Default true.

`secureProtocol` The SSL method to use, e.g. SSLv3_method to force SSL version 3. The possible values depend on your installation of OpenSSL.

### See Also

* [http://nodejs.org/api/http.html#http_class_http_agent](http://nodejs.org/api/http.html#http_class_http_agent)
* [http://nodejs.org/api/https.html](http://nodejs.org/api/https.html)
