'use strict';

var hammer = require('hammertime'),
    LoginCookieStruct = require('../../lib/loginCookieStruct'),
    AuthToken = require('../../lib/authToken');

var cookieBytes = new Buffer([91, -91, 92, 37, -41, -67, -124, 29, -57, 123, 3, 0, 0, 0, 0, 0, 10, 0, 0, 0, 87, 50, 19, 74, 0, 0, 80, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);
var token = new AuthToken({
    accountNumber: '2127033655768163675',
    authType: 'P'.charCodeAt(0),
    loginId: '228295',
    sessionNumber: 10,
    sessionTime: 1242772055
});

hammer({
    iterations: 1000,
    after: function (report) {
        console.log('serialize: %d operations/second.', report.ops);
    }
}).time(function () {
    LoginCookieStruct.fromJSON(token);
});

hammer({
    iterations: 1000,
    after: function (report) {
        console.log('deserialize: %d operations/second.', report.ops);
    }
}).time(function () {
    LoginCookieStruct.fromData(cookieBytes);
});